---
import { getCategorySlugPathUrl } from "@utils/url-utils";

interface Props {
	label: string;
	slugPath: string[];
	count: number;
	activeSlugPath: string[];
}

const { label, slugPath, count, activeSlugPath } = Astro.props;
const isActiveLeaf =
	activeSlugPath.length === slugPath.length &&
	activeSlugPath.every((seg, idx) => slugPath[idx] === seg);
---
<li class="flex">
	<a
		href={getCategorySlugPathUrl(slugPath)}
		aria-label={`View all posts in the ${label} category`}
		class="w-full"
	>
		<button
			class:list={[
				`
            w-full
            h-10
            rounded-lg
            bg-none
            hover:bg-[var(--btn-plain-bg-hover)]
            active:bg-[var(--btn-plain-bg-active)]
            transition-all
            pl-2
            hover:pl-3
            
            text-neutral-700
            hover:text-[var(--primary)]
            dark:text-neutral-300
            dark:hover:text-[var(--primary)]
        `,
				isActiveLeaf ? "font-semibold text-[var(--primary)]" : "",
			]}
		>
			<div class="flex items-center justify-between relative mr-2">
				<div class="overflow-hidden text-left whitespace-nowrap overflow-ellipsis">
					{label}
				</div>
				<div
					class="transition px-2 h-7 ml-4 min-w-[2rem] rounded-lg text-sm font-bold
                    text-[var(--btn-content)] dark:text-[var(--deep-text)]
                    bg-[var(--btn-regular-bg)] dark:bg-[var(--primary)]
                    flex items-center justify-center"
				>
					{count}
				</div>
			</div>
		</button>
	</a>
</li>
