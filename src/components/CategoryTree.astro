---
import type { CategoryNode } from "@/lib/posts";

const { nodes } = Astro.props as { nodes: CategoryNode[] };
---

<ul style="list-style:none; margin:0; padding:0;">
  {nodes.map((n) => (
    <li>
      {n.children?.length ? (
        <details>
          <summary>
            <span class="left">
              <span class="chev" aria-hidden="true"></span>
              <span>{n.name}</span>
            </span>
            <span class="cnt">{n.count}</span>
          </summary>
          <div style="padding-left: 8px;">
            <a href={`/category/${encodeURI(n.path)}/`}>
              <span>전체</span>
              <span class="cnt">{n.count}</span>
            </a>
	    <Astro.self nodes={n.children} />
          </div>
        </details>
      ) : (
        <a href={`/category/${encodeURI(n.path)}/`}>
          <span>{n.name}</span>
          <span class="cnt">{n.count}</span>
        </a>
      )}
    </li>
  ))}
</ul>
